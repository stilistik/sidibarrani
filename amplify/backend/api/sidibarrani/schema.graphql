type Game @model @auth(rules: [{ allow: public }]) {
  id: ID!
  name: String!
  teams: [Team] @connection(keyName: "byGame", fields: ["id"])
}

type PlayerTeams
  @model(queries: null)
  @key(name: "byPlayer", fields: ["playerID", "teamID"])
  @key(name: "byTeam", fields: ["teamID", "playerID"])
  @auth(rules: [{ allow: public }]) {
  id: ID!
  playerID: ID!
  teamID: ID!
  player: Player! @connection(fields: ["playerID"])
  team: Team! @connection(fields: ["teamID"])
}

type Team
  @model
  @key(name: "byGame", fields: ["gameID"])
  @auth(rules: [{ allow: public }]) {
  id: ID!
  gameID: ID!
  players: [PlayerTeams] @connection(keyName: "byTeam", fields: ["id"])
}

type Player @model @auth(rules: [{ allow: public }]) {
  id: ID!
  name: String!
  teams: [PlayerTeams] @connection(keyName: "byPlayer", fields: ["id"])
}

type Query {
  echo(msg: String): String @function(name: "echo-${env}")
}
